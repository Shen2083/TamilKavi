# VenbaCraft – Tamil Classical Poetry Generator (MVP)

Paste this entire spec into Replit (AI Builder / Ghostwriter) to scaffold.

## Goal

Build and host a SvelteKit web app that generates **Tamil classical poems** (default: **Venba**). Users provide **keywords**, **emotion**, and **classicalness** level. Output is shown cleanly with optional transliteration.

## Stack

* **Framework:** SvelteKit (TypeScript)
* **Styling:** Tailwind CSS
* **Fonts:** Noto Sans Tamil
* **Backend:** SvelteKit server route
* **LLM:** OpenAI Responses API (via env var `OPENAI_API_KEY`)
* **Hosting:** Replit

## Project Structure

```
src/
  routes/
    +page.svelte           # Main UI
    api/
      generate/+server.ts # LLM call API endpoint
  lib/components/
    PromptForm.svelte
    OutputCard.svelte
    TonePicker.svelte
    StrictnessSlider.svelte
  lib/utils/
    transliterate.ts
    heuristics.ts
```

## UI

### Inputs

* Keywords / ideas (textarea)
* Form: Venba (default)
* Emotion (select): Serene, Romantic, Melancholic, Devotional, Playful, Heroic
* Classicalness slider (0–100)
* Length: Short | Standard | Extended
* Toggles:

  * Show transliteration
  * Show gloss
  * Show meter brief note

### Actions

* Generate
* Regenerate
* Copy
* Download PNG
* Share link (state in querystring)

### Output

* Tamil poem (large line height)
* Optional transliteration
* Optional brief gloss
* Optional one-line “meter feel” note

## Server Endpoint

**File:** `src/routes/api/generate/+server.ts`

```
import { json } from '@sveltejs/kit';

export async function POST({ request, fetch }) {
  const {
    keywords,
    tone,
    classicalness,
    length,
    wantTranslit,
    wantGloss,
    wantMeterNote
  } = await request.json();

  const apiKey = process.env.OPENAI_API_KEY;
  if (!apiKey) return json({ error: 'No OPENAI_API_KEY provided' }, { status: 500 });

  const systemPrompt = `
You are “Venba Studio,” a Tamil classical poetry assistant.
Write in the style of வேண்பா (Venba): 4 lines, compact cadence.
Language: elegant Tamil; avoid slang; minimize Sanskrit unless tone requires.
Respect Classicalness:
  0-30: light classical flavor
  40-70: balanced venba-like phrasing
  80-100: tight classical diction & cadence
Poem ONLY first. Optional extras after.
`;

  const userPrompt = `
Keywords: ${keywords}
Tone: ${tone}
Classicalness: ${classicalness}
Length: ${length}
Translit: ${wantTranslit}
Gloss: ${wantGloss}
MeterNote: ${wantMeterNote}
`;

  const response = await fetch("https://api.openai.com/v1/responses", {
    method: "POST",
    headers: {
      "Authorization": `Bearer ${apiKey}`,
      "Content-Type": "application/json"
    },
    body: JSON.stringify({
      model: "gpt-4.1-mini",
      input: [
        { role: "system", content: systemPrompt },
        { role: "user", content: userPrompt }
      ],
      max_output_tokens: 400
    })
  });

  const data = await response.json();
  if (!data.output_text) return json({ error: "No poem returned" }, { status:500 });

  return json({ poem: data.output_text.trim() });
}
```

## Main PromptForm Logic (Pseudo)

* Collect values from inputs
* POST to `/api/generate`
* Set `poem` state

## Transliteration Utility (minimal placeholder)

```
export function transliterate(tamil: string): string {
  // TODO: basic Tamil → Latin map
  return tamil;
}
```

## Heuristics (Display-Only)

```
export function checkAlliteration(lines: string[]): boolean {
  // simple check on first letters
  return true;
}
```

## Tailwind Setup

Run:

```
npm install -D tailwindcss postcss autoprefixer
npx tailwindcss init -p
```

Add to `tailwind.config.cjs`:

```
content: ["./src/**/*.{html,js,svelte,ts}"]
```

Import in `app.css`:

```
@tailwind base;
@tailwind components;
@tailwind utilities;
```

## Fonts

Add in `app.css` or layout:

```
@import url('https://fonts.googleapis.com/css2?family=Noto+Sans+Tamil:wght@400;500;700&display=swap');
```

Then use class: `class="font-[Noto Sans Tamil]"`

## Testing

1. Add `OPENAI_API_KEY` in Replit Secrets
2. Run app
3. Enter: `காதல், வெம்மை, மல்லிகை`
4. Tone: Romantic; Classicalness: 70; Length: Standard
